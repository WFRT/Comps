---
layout: tutorial
---
<h2>Overview</h2>
<div class="row">
   <div class="col-sm-6">
      <p>
      In the previous tutorial you used COMPS to produce forecasts for several different configurations.
      In this tutorial we will see how we can set up COMPS to run new configurations.
      </p>
      <p>
      The forecasts that COMPS produces are governed by a set of files called namelists. There are 4 types
      and work in a hierarchy: At the bottom is a namelist that defines all post-processing schemes
      available in COMPS. The level above (the configuration namelist) defines which schemes are combined
      together to form configurations.
      </p>
      <p>
      In part 1 of the tutorial, we ran 4 configurations for temperature. In an operational setting you may want to
      produce forecasts for several variables, such as precipitation and wind speed. Different variables
      often use different configurations. Therefore COMPS has a way to assign configurations to variables.
      The varconf namelist (short for variable-configuration) defines which configurations go
      together with which variables.
      </p>
      <p>
      Finally, the runs namelist defines which variable-configurations to use. Here the input datasets are
      specified as well.
      </p>
      <p>
      All namelists are read at runtime. Therefore COMPS does not need to be recompiled after changing
      these files.
      </p>
      <p>
      In addition to the 4 hierarchical namelists, there is a 5th namelist, which stores definitions of variables.
      In most cases you will not change this file, as it merely contains information such as minimum and maximum
      expected values for each variable.
      </p>
   </div>
   <div class="col-sm-6">
      <img src="{{ site.baseurl }}/img/configurations.png" width="100%">
   </div>
</div>

<h3><i class="fa fa-chevron-circle-right"></i> Files</h3><hr>
<table class="table table-striped table-condensed">
   <thead>
      <tr><th>File</th><th>Purpose</th></tr>
   </thead>
   <tr><td><code>./namelists/default/runs.nl</code></td><td>Defines which variables to create forecasts for</td></tr>
   <tr><td><code>./namelists/default/varconfs.nl</code></td><td>Defines what configurations should be used for each forecast variable</td></tr>
   <tr><td><code>./namelists/default/configurations.nl</code></td><td>Defines what post-processing schemes go together to form configurations</td></tr>
   <tr><td><code>./namelists/default/schemes.nl</code></td><td>Defines options for schemes</td></tr>
   <tr><td><code>./namelists/default/variables.nl</code></td><td>Contains definitions of variables such as temperature, humidity, etc.</td></tr>
</table>

<h3><i class="fa fa-chevron-circle-right"></i> Format</h3><hr>
<p>
The files consists of definitions, one per line. The first column is the tag name, which <b>must be
   unique (within one namelist file. The same name can be reused in two different files.)</b>. After that is a
series of attribute and values, in the format: <code>attribute1=value1 attribute2=value2</code>.
Multiple values for one attribute can be specified by separating values by a comma
<code>attribute=value1,value2</code>, by using ranges <code>attribute=start:end</code>, ranges with
increments <code>attribute=start:increment:end</code>, or some combination
<code>attribute=value1,start:inc:end,value2</code>.
</p>
 {% highlight bash %}
raw selector=analog downscaler=nearest uncertainty=spreadReg
{% endhighlight %}

<!--
<div class="col-sm-4">
   <div class="panel panel-default">
      <div class="panel-heading">
         <h3 class="panel-title">Configuration</h3>
      </div>
      <div class="panel-body">
         A collection of post-processing schemes and other settings that together produce a
         forecast. Different configurations generally produce different forecasts. For
         example a configuration could contain the nearest neighbour downscaler, the analog
         method for selecting an ensemble, the Kalman filter to bias-correct the ensemble,
         and finally the Bayesian Model Averaging method for representing forecast
         uncertainty.
         <img src="{{ site.baseurl }}/img/configuration.png" width="100%">
         In addition, the configuration can specify if and what quality control system
         should be used to ensure any observations used are realistic.
      </div>
   </div>
   <div class="panel panel-default">
      <div class="panel-heading">
         <h3 class="panel-title">Run</h3>
      </div>
      <div class="panel-body">
         Specifies which datasets and configurations to use and for which variables.
         <br>
         <table class="table">
            <tr>
               <td>Raw forecasts</td><td>GFS</td>
            </tr>
            <tr>
               <td>Observations</td><td>Global synop</td>
            </tr>
            <tr>
               <td>Configurations</td><td>
            <img src="{{ site.baseurl }}/img/conf_simple.png" width="30%">
            <img src="{{ site.baseurl }}/img/conf_simple.png" width="30%">
            <img src="{{ site.baseurl }}/img/conf_simple.png" width="30%">
               </td>
            </tr>
            <tr>
               <td>Output</td><td>NetCDF</td>
            </tr>
         </table>
      </div>
   </div>
</div>
<--!>
